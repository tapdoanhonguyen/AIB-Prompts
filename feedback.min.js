import{FeedbackTypeNo as t}from"./enums.min.js";import{hideModal as e}from"./utils.min.js";import{i18ngetMessage as s}from"./translator.min.js";let createReportPromptModal=function(r,o,p){let m=o[r];if(!m||m.OwnPrompt)return;let a=document.getElementById("reportPromptModal");a||((a=document.createElement("div")).id="reportPromptModal",a.addEventListener("submit",p),document.body.appendChild(a)),a.innerHTML=`
      <div class="AIBestPrompts__fixed AIBestPrompts__inset-0 AIBestPrompts__text-center AIBestPrompts__transition-opacity AIBestPrompts__z-50">
        <div class="AIBestPrompts__absolute AIBestPrompts__bg-gray-900 AIBestPrompts__inset-0 AIBestPrompts__opacity-90">
        </div>

        <div class="AIBestPrompts__fixed AIBestPrompts__inset-0 AIBestPrompts__overflow-y-auto">
          <div class="AIBestPrompts__flex AIBestPrompts__items-center AIBestPrompts__justify-center AIBestPrompts__min-h-full">
            <div
              class="AIBestPrompts__align-center AIBestPrompts__bg-white dark:AIBestPrompts__bg-gray-800 dark:AIBestPrompts__text-gray-200 AIBestPrompts__inline-block AIBestPrompts__overflow-hidden sm:AIBestPrompts__rounded-lg AIBestPrompts__shadow-xl sm:AIBestPrompts__align-middle sm:AIBestPrompts__max-w-lg sm:AIBestPrompts__my-8 sm:AIBestPrompts__w-full AIBestPrompts__text-left AIBestPrompts__transform AIBestPrompts__transition-all"
              role="dialog" aria-modal="true" aria-labelledby="modal-headline">

              <div class="AIBestPrompts__bg-white dark:AIBestPrompts__bg-gray-800 AIBestPrompts__px-4 AIBestPrompts__pt-5 AIBestPrompts__pb-4 sm:AIBestPrompts__p-6 sm:AIBestPrompts__pb-4">

                <div id="reportPromptIntroText">
                  <p class="AIBestPrompts__mb-6">${s("reportPromptIntroText")}                  
                  </p>

                  <div class="AIBestPrompts__mt-2">
                    <label for="FeedbackTypeNo" class="AIBestPrompts__block">${s("FeedbackTypeNotitle")}</label>
                    <select data-prompt-id="${m.ID}" id="FeedbackTypeNo" name="FeedbackTypeNo" class="AIBestPrompts__mt-2 AIBestPrompts__mb-3 dark:AIBestPrompts__bg-gray-700 dark:AIBestPrompts__border-gray-700 dark:hover:AIBestPrompts__bg-gray-900 AIBestPrompts__rounded AIBestPrompts__w-full" required>
                      <option value="${t.GENERIC_LEGAL_CONCERN}">
                      ${s("GENERIC_LEGAL_CONCERN")}                      
                      </option>
                      <optgroup label="Result concerns">                        
                        <option value="${t.NOT_MULTILINGUAL}">
                        ${s("NOT_MULTILINGUAL")}                            
                        </option>
                        <option value="${t.NOT_GENERIC}">
                        ${s("NOT_GENERIC")} 
                        </option>                        
                        <option value="${t.GENERIC_CONCERN}">
                        ${s("GENERIC_CONCERN")}                          
                        </option>
                      </optgroup>                  
                      <option value="${t.SPAM}">${s("SPAM")}</option>
                    </select>
                  </div>
                </div>

                <div class="reportPromptFeedbackContainer AIBestPrompts__hidden AIBestPrompts__overflow-y-auto" id="reportPromptFeedbackForm"></div>
              </div>

              <div class="AIBestPrompts__bg-gray-200 dark:AIBestPrompts__bg-gray-700 AIBestPrompts__px-4 AIBestPrompts__py-3 AIBestPrompts__text-right">
                <button type="button" class="AIBestPrompts__bg-gray-600 hover:AIBestPrompts__bg-gray-800 AIBestPrompts__mr-2 AIBestPrompts__px-4 AIBestPrompts__py-2 AIBestPrompts__rounded AIBestPrompts__text-white"
                        onclick="AIBestPrompts.hideModal('reportPromptModal')"> ${s("Cancel")}
                </button>
                <button type="button" id="reportPromptSubmitButton" class="AIBestPrompts__bg-green-600 hover:AIBestPrompts__bg-green-700 AIBestPrompts__mr-2 AIBestPrompts__px-4 AIBestPrompts__py-2 AIBestPrompts__rounded AIBestPrompts__text-white">${s("Send")}
                </button>
              </div>
            </div>
          </div>
        </div>

      </div>`,a.querySelector("#reportPromptSubmitButton").addEventListener("click",t=>{document.getElementById("reportPromptIntroText").style="display: none;";let e=document.getElementById("FeedbackTypeNo"),s=document.getElementById("reportPromptFeedbackForm");s.innerHTML=getFeedbackFormTemplate(+e.value,e.dataset.promptId),s.classList.remove("AIBestPrompts__hidden"),t.target.innerText="Send Report",t.target.addEventListener("click",()=>{document.querySelector("#reportPromptModal .reportPromptFeedbackContainer:not(.hidden) form").requestSubmit()})},{once:!0}),a.style="display: block;",document.addEventListener("keydown",t=>{"Escape"===t.key&&e("reportPromptModal")})},getFeedbackFormTemplate=(e,r)=>{let o=[t.GENERIC_CONCERN,t.GENERIC_LEGAL_CONCERN,].includes(e);return`
    <p class="AIBestPrompts__mb-6">
      <br><br>${s("FeedbackScreenText21")}
    </p>

    <form>
      <input type="hidden" name="PromptID" value="${r}" />

      <input type="hidden" name="FeedbackTypeNo" value="${e}" />

      <label>${s("ContactEmail")} ${o?"":' <span class="AIBestPrompts__text-sm AIBestPrompts__text-gray-500">(optional)</span>'}</label>
      <input name="FeedbackContact" 
        ${o?" required ":""} type="email"
        title="Email address to contact you in case we need more information"
        class="AIBestPrompts__w-full AIBestPrompts__bg-gray-100 dark:AIBestPrompts__bg-gray-700 dark:AIBestPrompts__border-gray-700 AIBestPrompts__rounded AIBestPrompts__p-2 AIBestPrompts__mt-2 AIBestPrompts__mb-3"
        placeholder="example@example.com" />

      <label>${s("Feedback")} ${o?"":' <span class="AIBestPrompts__text-sm AIBestPrompts__text-gray-500">(optional)</span>'}</label>
      <textarea name="FeedbackText" 
        ${o?" required ":""}
        title="Short description of the issue"
        class="AIBestPrompts__w-full AIBestPrompts__bg-gray-100 dark:AIBestPrompts__bg-gray-700 dark:AIBestPrompts__border-gray-700 AIBestPrompts__rounded AIBestPrompts__p-2 AIBestPrompts__mt-2 AIBestPrompts__mb-3" style="height: 140px;"
        placeholder="${s("FeedbackText")} ${e===t.GENERIC_CONCERN?s("FeedbackText2"):""}"></textarea>
    </form>
  `};export{createReportPromptModal};