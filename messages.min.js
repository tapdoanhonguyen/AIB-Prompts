import{MessageSeverityNo as t,MessageStatusNo as s,MessageVoteTypeNo as e}from"./enums.min.js";import{hideModal as o,svg as r}from"./utils.min.js";let NotificationMessageSeverityClassName={[t.INFO]:"AIBestPrompts__bg-gray-500",[t.SUCCESS]:"AIBestPrompts__bg-green-500",[t.UPDATE]:"AIBestPrompts__bg-[#5436DA]"},showMessage=(e,o,r)=>{let m=e.find(e=>e.MessageStatusNo===s.ACTIVE&&e.MessageSeverityNo===t.MANDATORY_MUST_CONFIRM&&(!e.ExpiryTime||new Date(e.ExpiryTime)>new Date));if(m){createConfirmMessageModal(m,o);return}(m=e.find(e=>e.MessageStatusNo===s.ACTIVE&&e.MessageSeverityNo!==t.MANDATORY_MUST_CONFIRM&&(!e.ExpiryTime||new Date(e.ExpiryTime)>new Date)))&&createNotificationMessage(m,r)},createConfirmMessageModal=(t,s)=>{let e=document.getElementById("confirmMessageModal");e||((e=document.createElement("div")).id="confirmMessageModal",e.addEventListener("submit",async t=>{t.preventDefault();let e=t.target.MessageID.value;await s(e)&&o("confirmMessageModal")}),document.body.appendChild(e)),e.innerHTML=`
      <div class="AIBestPrompts__fixed AIBestPrompts__inset-0 AIBestPrompts__text-center AIBestPrompts__transition-opacity AIBestPrompts__z-50">
        <div class="AIBestPrompts__absolute AIBestPrompts__bg-gray-900 AIBestPrompts__inset-0 AIBestPrompts__opacity-90">
        </div>

        <div class="AIBestPrompts__fixed AIBestPrompts__inset-0 AIBestPrompts__overflow-y-auto">
          <div class="AIBestPrompts__flex AIBestPrompts__items-center AIBestPrompts__justify-center AIBestPrompts__min-h-full">
            <form>
              <div
                class="AIBestPrompts__align-center AIBestPrompts__bg-white dark:AIBestPrompts__bg-gray-800 dark:AIBestPrompts__text-gray-200 AIBestPrompts__inline-block AIBestPrompts__overflow-hidden sm:AIBestPrompts__rounded-lg AIBestPrompts__shadow-xl sm:AIBestPrompts__align-middle sm:AIBestPrompts__max-w-2xl sm:AIBestPrompts__my-8 sm:AIBestPrompts__w-full AIBestPrompts__text-left AIBestPrompts__transform AIBestPrompts__transition-all AIBestPrompts__prose dark:AIBestPrompts__prose-invert"
                role="dialog" aria-modal="true" aria-labelledby="modal-headline">

                <div class="AIBestPrompts__bg-white dark:AIBestPrompts__bg-gray-800 AIBestPrompts__px-4 AIBestPrompts__pt-5 AIBestPrompts__pb-4 sm:AIBestPrompts__p-6 sm:AIBestPrompts__pb-4">

                  <h3 class="AIBestPrompts__mt-1 AIBestPrompts__mb-6">${t.MessageSubject}</h3>

                  <div class="AIBestPrompts__mb-6 AIBestPrompts__overflow-y-auto">${t.MessageBodyHTML}</div>

                  <label class="AIBestPrompts__font-semibold">
                    <input name="MessageID" value="${t.MessageID}" type="checkbox" class="AIBestPrompts__mr-2 dark:AIBestPrompts__bg-gray-700" required> 
                    ${i18ngetMessage("ReadTermsConditions")}
                  </label>
                </div>

                <div class="AIBestPrompts__bg-gray-200 dark:AIBestPrompts__bg-gray-700 AIBestPrompts__px-4 AIBestPrompts__py-3 AIBestPrompts__text-right">
                  <button type="submit" id="reportPromptSubmitButton" class="AIBestPrompts__bg-green-600 hover:AIBestPrompts__bg-green-700 AIBestPrompts__mr-2 AIBestPrompts__px-4 AIBestPrompts__py-2 AIBestPrompts__rounded AIBestPrompts__text-white">${i18ngetMessage("Confirm")}
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>

      </div>`,e.style="display: block;"},createNotificationMessage=(t,s)=>{let o=NotificationMessageSeverityClassName[t.MessageSeverityNo],m=document.createElement("div");m.innerHTML=`
      <div class="AIBestPrompts__fixed AIBestPrompts__flex AIBestPrompts__justify-center AIBestPrompts__w-full AIBestPrompts__top-2 AIBestPrompts__px-2 AIBestPrompts__z-50 AIBestPrompts__pointer-events-none">
        <div class="${o} AIBestPrompts__flex AIBestPrompts__pointer-events-auto AIBestPrompts__px-6 AIBestPrompts__py-3 AIBestPrompts__rounded-md AIBestPrompts__text-white" role="alert" style="min-width: 30rem;">
          <div class="AIBestPrompts__flex AIBestPrompts__flex-col AIBestPrompts__gap-2 AIBestPrompts__w-full">

            <h4 class="AIBestPrompts__w-full">${t.MessageSubject}</h4>

            <div class="AIBestPrompts__prose AIBestPrompts__w-full AIBestPrompts__text-white">
              ${t.MessageBodyHTML}
            </div> 

            <div class="AIBestPrompts__flex AIBestPrompts__gap-4 AIBestPrompts__mt-4" style="justify-content: end;">
              <button data-message-vote-type-no="${e.MESSAGE_LIKE}" title="I like this">${r("ThumbUp")}</button>
              <button data-message-vote-type-no="${e.MESSAGE_DISLIKE}" title="I don't like this">${r("ThumbDown")}</button>
            </div>

          </div>
        </div>
      </div>
    `,m.querySelectorAll("button").forEach(e=>{e.addEventListener("click",async e=>{await s(t.MessageID,+e.target.closest("button").dataset.messageVoteTypeNo)&&m.remove()})}),document.body.appendChild(m)};export{showMessage};